# ===============================
#   TMUX CONFIGURATION (macOS)
# ===============================

# --- General ---
set -g default-terminal "tmux-256color"
set-option -ga terminal-overrides ",xterm-256color:RGB"
set -g base-index 1
setw -g pane-base-index 1
set -g history-limit 10000
set -g repeat-time 300
set -s escape-time 0
set -g mouse on
set -g utf8 on
setw -g aggressive-resize on

# --- Shell ---
set-option -g default-shell /opt/homebrew/bin/fish
set-option -g default-command /opt/homebrew/bin/fish

# --- macOS Clipboard Integration ---
set-option -g set-clipboard on
bind-key -T copy-mode-vi y send -X copy-pipe-and-cancel "pbcopy"
bind-key -T copy-mode-vi Enter send -X copy-pipe-and-cancel "pbcopy"
bind-key p run "pbpaste | tmux load-buffer - && tmux paste-buffer"

# --- Keybindings ---
unbind C-b
set -g prefix C-a
bind C-a send-prefix

# Pane navigation (like Vim)
bind -r h select-pane -L
bind -r j select-pane -D
bind -r k select-pane -U
bind -r l select-pane -R

# Split panes
bind | split-window -h
bind - split-window -v

# Resize panes
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

# Window management
bind c new-window
bind n next-window
bind p previous-window
bind w choose-window
bind & kill-window
bind x kill-pane

# --- Status Bar ---
set -g status-position top
set -g status-bg black
set -g status-fg white
set -g status-interval 5

set -g status-left-length 60
set -g status-right-length 120

set -g status-left "#[fg=cyan,bold]#S #[fg=white]| #[fg=green]#I:#P"
set -g status-right "#[fg=yellow]#(pmset -g batt | grep -Eo '[0-9]+%') #[fg=white]| #[fg=blue]%Y-%m-%d %H:%M #[fg=white]| #[fg=magenta]#H"

# --- Plugins (Optional if using TPM) ---
# Install TPM: https://github.com/tmux-plugins/tpm
# set -g @plugin 'tmux-plugins/tpm'
# set -g @plugin 'tmux-plugins/tmux-sensible'
# set -g @plugin 'tmux-plugins/tmux-yank'
# set -g @plugin 'tmux-plugins/tmux-resurrect'
# run '~/.tmux/plugins/tpm/tpm'
